<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta
			name="description"
			content="Contact Apiary Logic - We build thoughtful, accessible software for small businesses." />
		<meta name="robots" content="noindex, nofollow" />
		<title>Contact - Apiary Logic</title>
		<link href="styles.css" rel="stylesheet" />
		<link
			rel="icon"
			type="image/png"
			href="public/assets/favicon-light.png"
			media="(prefers-color-scheme: dark)" />
		<link
			rel="icon"
			type="image/png"
			href="public/assets/favicon-dark.png"
			media="(prefers-color-scheme: light)" />
		<link rel="icon" type="image/png" href="public/assets/favicon-light.png" />
	</head>
	<body>
		<header>
			<a href="../index.html" class="static-logo" aria-label="Return to Apiary Logic home">
				<!-- SVG code remains unchanged -->
			</a>
		</header>
		<main class="content">
			<h1>Let's Connect</h1>
			<p class="intro">
				Whether you need help with a project or want to collaborate, I'd love to hear from
				you.
			</p>
			<form action="https://formspree.io/f/xovegebo" method="POST" class="contact-form">
				<div class="form-group">
					<label for="name">Name</label>
					<input type="text" id="name" name="name" required />
				</div>
				<input
					type="text"
					name="_gotcha"
					style="display: none"
					tabindex="-1"
					autocomplete="off" />
				<div class="form-group">
					<label for="email">Email</label>
					<input type="email" id="email" name="email" required />
				</div>
				<div class="form-group">
					<label for="message">Message</label>
					<textarea id="message" name="message" rows="5" required></textarea>
				</div>
				<input type="hidden" name="_next" value="success.html" />
				<input
					type="hidden"
					name="_subject"
					value="New Message from Apiary Logic Contact Form" />
				<button type="submit" class="submit-button">Submit</button>
			</form>
		</main>
		<script>
			let lastSubmissionTime = 0;
			const COOLDOWN_PERIOD = 30000; // 30 seconds in milliseconds

			document.querySelector('.contact-form').addEventListener('submit', async (e) => {
				e.preventDefault();

				const now = Date.now();
				if (now - lastSubmissionTime < COOLDOWN_PERIOD) {
					const remainingTime = Math.ceil(
						(COOLDOWN_PERIOD - (now - lastSubmissionTime)) / 1000
					);
					alert(`Please wait ${remainingTime} seconds before submitting again.`);
					return;
				}

				try {
					const form = e.target;
					const response = await fetch(form.action, {
						method: 'POST',
						body: new FormData(form),
						headers: {
							Accept: 'application/json',
						},
					});

					if (response.ok) {
						lastSubmissionTime = now;
						window.location.href = 'success.html';
					} else {
						throw new Error('Form submission failed');
					}
				} catch (error) {
					console.error('Error:', error);
					alert('Sorry, there was a problem submitting your form. Please try again.');
				}
			});
		</script>
	</body>
</html>
